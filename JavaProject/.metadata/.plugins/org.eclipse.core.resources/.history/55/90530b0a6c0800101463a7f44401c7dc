package day0324;

import java.awt.Color;
import java.awt.Container;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.table.DefaultTableModel;

import day0319.DbConnect;

public class UpdateScore extends JFrame {

	Container cp;
	JTextField tfName, tfJava, tfJsp, tfSpring;
	JComboBox<String> cbBan;
	JButton btnAdd; //입력한 점수를 메인에 추가하는 버튼
	DbConnect db=new DbConnect();
	DefaultTableModel model;
	//생성자
	public UpdateScore(String title) {
		super(title);
		
		//위치,너비
		this.setBounds(1000, 100, 600, 350);		
		cp=this.getContentPane();
		//메인프레임 종료
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		//창 색상
		cp.setBackground(new Color(245,245,245));		
		initDesign();
		this.setVisible(true);	
	}
	
	public void selectData(String su)
	{
		model.setRowCount(0);
		Connection conn=db.getConnection();
		PreparedStatement pstmt=null;
		ResultSet rs=null;
		
		String sql="select name, ban, java, jsp, spring from stuscore where num=?";
		
		try {
			pstmt=conn.prepareStatement(sql);
			pstmt.setString(1, su);
			rs=pstmt.executeQuery();
			
			while(rs.next())
			{
				
				
				JLabel lblName1=new JLabel(rs.getString("name"));
				JLabel lblBan1=new JLabel(rs.getString("ban"));
				JLabel lblJava1=new JLabel(rs.getString("java"));
				JLabel lblJsp1=new JLabel(rs.getString("jsp"));
				JLabel lblSpring1=new JLabel(rs.getString("spring"));
			
			
				lblName1.setBounds(20, 40, 60, 30);
				this.add(lblName1);
				lblBan1.setBounds(20, 70, 60, 30);
				this.add(lblBan1);
				lblJava1.setBounds(20, 110, 60, 30);
				this.add(lblJava1);
				lblJsp1.setBounds(20, 150, 60, 30);
				this.add(lblJsp1);
				lblSpring1.setBounds(20, 190, 60, 30);
				this.add(lblSpring1);
				
				
			}
					
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}finally {
			db.dbClose(rs, pstmt, conn);
		}
	}
	
	public void initDesign()
	{
		this.setLayout(null);
		JLabel title1=new JLabel("수정할 학생 정보");
		JLabel title2=new JLabel("학생명");
		JLabel title3=new JLabel("반");
		JLabel title4=new JLabel("Java");
		JLabel title5=new JLabel("Jsp");
		JLabel title6=new JLabel("Spring");
		
		selectData(getName());
		
		title1.setBounds(20, 10, 90, 30);
		this.add(title1);		
		title2.setBounds(20, 40, 60, 30);
		this.add(title2);
		title3.setBounds(20, 70, 60, 30);
		this.add(title3);
		title4.setBounds(20, 110, 60, 30);
		this.add(title4);
		title5.setBounds(20, 150, 60, 30);
		this.add(title5);
		title6.setBounds(20, 190, 60, 30);
		this.add(title6);
		
		
		
		
		tfName=new JTextField();
		String [] ban= {"1강의장","2강의장","3강의장","4강의장"};
		cbBan=new JComboBox<String>(ban);
		tfJava=new JTextField();		
		tfJsp=new JTextField();
		tfSpring=new JTextField();
		
		JLabel lblName=new JLabel("학생명");
		JLabel lblBan=new JLabel("반");
		JLabel lblJava=new JLabel("Java");
		JLabel lblJsp=new JLabel("Jsp");
		JLabel lblSpring=new JLabel("Spring");		
		
		tfName.setBounds(290, 45, 70, 20);		
		this.add(tfName);		
		cbBan.setBounds(290, 80, 70, 20);
		this.add(cbBan);		
		tfJava.setBounds(290, 120, 70, 20);
		this.add(tfJava);		
		tfJsp.setBounds(290, 160, 70, 20);
		this.add(tfJsp);		
		tfSpring.setBounds(290, 200, 70, 20);
		this.add(tfSpring);
		
		
		
	
		
		
		
		
		
	
		
		
		
		//버튼
		btnAdd=new JButton("점수수정");
		btnAdd.setBounds(50, 240, 90, 30);
		
		this.add(btnAdd);
		
		
		
	}
	
	public static void main(String[] args) {
		new UpdateScore("성적 수정 폼");
	}
}
